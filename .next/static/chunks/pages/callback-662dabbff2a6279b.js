(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[480],{5700:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/callback",function(){return n(1495)}])},1495:function(e,t,n){"use strict";n.r(t);var r=n(7568),c=n(655),o=n(5893),s=n(1163),u=n(7294),a=n(5564);t.default=function(){var e=(0,s.useRouter)();return(0,u.useEffect)((function(){var t=function(){var t=(0,r.Z)((function(){var t,n,r;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:if(t=e.query.code,console.log("Router query:",e.query),!t)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),console.log("Exchanging code for access token..."),[4,(0,a.h)(t)];case 2:return n=c.sent(),console.log("Access token received:",n.access_token),sessionStorage.setItem("spotify_access_token",n.access_token),e.push("/"),[3,4];case 3:return r=c.sent(),console.error("Error during authentication:",r),e.push("/"),[3,4];case 4:return[2]}}))}));return function(){return t.apply(this,arguments)}}();t()}),[e.query]),(0,o.jsx)("div",{children:(0,o.jsx)("h1",{children:"Authenticating..."})})}},5564:function(e,t,n){"use strict";n.d(t,{d:function(){return l},h:function(){return f}});var r=n(7568),c=n(655),o=n(9669),s=n.n(o),u=n(7563),a="83cabe8ccb85435b9ad3c8cb2e83d111",i="http://localhost:3000/callback",l=function(){var e={client_id:a,response_type:"code",redirect_uri:i,show_dialog:!0,scope:"user-top-read"};return"https://accounts.spotify.com/authorize?".concat(u.stringify(e))},f=function(){var e=(0,r.Z)((function(e){var t,n,r;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:t="https://accounts.spotify.com/api/token",n={client_id:a,client_secret:"b6bbd78d38404ce994dafb616a0d4aee",grant_type:"authorization_code",code:e,redirect_uri:i},c.label=1;case 1:return c.trys.push([1,3,,4]),[4,s().post(t,u.stringify(n),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})];case 2:return[2,c.sent().data];case 3:throw r=c.sent(),console.error("Error during token exchange:",r),r;case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()}},function(e){e.O(0,[774,582,888,179],(function(){return t=5700,e(e.s=t);var t}));var t=e.O();_N_E=t}]);